<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.opple.fa.purchase.dao.InvoiceInspectionDAO">
	<!-- oracle 分页头 -->
	<sql id="pagination_Head">
		<![CDATA[select * from ( select row_.*, rownum rownum_ from ( ]]>
	</sql>
	<!-- oracle 分页尾 -->
	<sql id="pagination_Tail">
		<![CDATA[) row_ where rownum <= #{pager.pageSize}* #{pager.offset} ) where rownum_ >= #{pager.firstResult} + 1]]>
	</sql>
	<!-- count * from -->
	<sql id="count_Start_Head">
		<![CDATA[select count(*) from ( ]]>
	</sql>
	<sql id="count_Start_Tail">
		<![CDATA[) countObj ]]>
	</sql>
	<resultMap id="invoiceInspectionMap" type="com.opple.fa.purchase.entity.InvoiceInspection">
		  <result property="id" column="ID" />
          <result property="createBy" column="CREATE_BY" />
          <result property="updateBy" column="UPDATE_BY" />
          <result property="createDate" column="CREATE_DATE" />
          <result property="updateDate" column="UPDATE_DATE" />
          <result property="deletedFlag" column="DELETED_FLAG" />
          <result property="paymentOrderDocument" column="PAYMENT_ORDER_DOCUMENT" />
          <result property="invoiceDate" column="INVOICE_DATE" />
          <result property="accountingDate" column="ACCOUNTING_DATE" />
          <result property="invoiceMoney" column="INVOICE_MONEY" />
          <result property="invoiceTax" column="INVOICE_TAX" />
          <result property="invoiceText" column="INVOICE_TEXT" />
          <result property="isManualCertificate" column="IS_MANUAL_CERTIFICATE" />
          <result property="purchaseOrderNumber" column="PURCHASE_ORDER_NUMBER" />
          <result property="sapPurchaseOrderNumber" column="SAP_PURCHASE_ORDER_NUMBER" />
          <result property="isComingSAP" column="IS_COMING_SAP" />
          <result property="netPrice" column="NET_PRICE" />
	</resultMap>
	<insert id="saveInvoiceInspection" keyProperty="id" useGeneratedKeys="true"  parameterType="com.opple.fa.purchase.entity.InvoiceInspection">
    	<selectKey keyProperty="id"  order="BEFORE" resultType="long">
			select seq_fa_invoice_inspection_id.nextval as id from dual
		</selectKey>
     INSERT INTO TB_FA_INVOICE_INSPECTION 
     ( ID,
		CREATE_BY,
		UPDATE_BY,
		CREATE_DATE,
		UPDATE_DATE,
		DELETED_FLAG,
		PAYMENT_ORDER_DOCUMENT,
		INVOICE_DATE,
		ACCOUNTING_DATE,
		INVOICE_MONEY,
		INVOICE_TAX,
		INVOICE_TEXT,
		IS_MANUAL_CERTIFICATE,
		PURCHASE_ORDER_NUMBER,
		SAP_PURCHASE_ORDER_NUMBER,
		IS_COMING_SAP,
		NET_PRICE) 
       VALUES
      ( #{id},  
		#{createBy},
		#{updateBy},
		#{createDate},
		#{updateDate},
		'0',
		#{paymentOrderDocument},
		#{invoiceDate},
		#{accountingDate},
		#{invoiceMoney},
		#{invoiceTax},
		#{invoiceText},
		#{isManualCertificate},
		#{purchaseOrderNumber},
		#{sapPurchaseOrderNumber},
		#{isComingSAP},
		#{netPrice})
    </insert>
    <select id="getInvoiceInspection" resultMap="invoiceInspectionMap" parameterType="com.opple.fa.purchase.entity.InvoiceInspection">
		SELECT *
		  FROM TB_FA_INVOICE_INSPECTION T
		 WHERE T.PAYMENT_ORDER_DOCUMENT = #{invoiceInspection.paymentOrderDocument}
	</select>
	
	
</mapper>