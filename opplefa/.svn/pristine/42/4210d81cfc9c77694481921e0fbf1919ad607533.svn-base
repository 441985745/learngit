<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.opple.fa.purchase.dao.InvoiceInspectionDetailDAO">
	<!-- oracle 分页头 -->
	<sql id="pagination_Head">
		<![CDATA[select * from ( select row_.*, rownum rownum_ from ( ]]>
	</sql>
	<!-- oracle 分页尾 -->
	<sql id="pagination_Tail">
		<![CDATA[) row_ where rownum <= #{pager.pageSize}* #{pager.offset} ) where rownum_ >= #{pager.firstResult} + 1]]>
	</sql>
	<!-- count * from -->
	<sql id="count_Start_Head">
		<![CDATA[select count(*) from ( ]]>
	</sql>
	<sql id="count_Start_Tail">
		<![CDATA[) countObj ]]>
	</sql>
	<resultMap id="invoiceInspectionDetailMap" type="com.opple.fa.purchase.entity.InvoiceInspectionDetail">
		  <result property="id" column="ID" />
          <result property="createBy" column="CREATE_BY" />
          <result property="updateBy" column="UPDATE_BY" />
          <result property="createDate" column="CREATE_DATE" />
          <result property="updateDate" column="UPDATE_DATE" />
          <result property="deletedFlag" column="DELETED_FLAG" />
          <result property="invoiceInspectionId" column="INVOICE_INSPECTION_ID" />
          <result property="sapMainCode" column="SAP_MAIN_CODE" />
          <result property="sapSecCode" column="SAP_SEC_CODE" />
          <result property="epMaterialDocument" column="EP_MATERIALDOCUMENT" />
          <result property="eBelnr" column="E_BELNR" />
          <result property="epMatDocumentYear" column="EP_MATDOCUMENTYEAR" />
	</resultMap>
	<select id="saveInvoiceInspectionDetail" parameterType="com.opple.fa.purchase.entity.InvoiceInspectionDetail">
     INSERT INTO TB_FA_INVOICE_DETAIL
     ( ID,
		CREATE_BY,
		UPDATE_BY,
		CREATE_DATE,
		UPDATE_DATE,
		DELETED_FLAG,
		INVOICE_INSPECTION_ID,
		SAP_MAIN_CODE,
		SAP_SEC_CODE,
		EP_MATERIALDOCUMENT,
		E_BELNR,
		EP_MATDOCUMENTYEAR) 
       VALUES
      ( seq_fa_inspection_detail_id.nextval,  
		#{createBy},
		#{updateBy},
		#{createDate},
		#{updateDate},
		'0',
		#{invoiceInspectionId},
		#{sapMainCode},
		#{sapSecCode},
		#{epMaterialDocument},
		#{eBelnr},
		#{epMatDocumentYear})
    </select>
    <select id="searchInvoiceInspectionDetail" resultMap="invoiceInspectionDetailMap" parameterType="com.opple.fa.purchase.entity.InvoiceInspectionDetail">
		SELECT *
		  FROM TB_FA_INVOICE_DETAIL T
		 WHERE T.INVOICE_INSPECTION_ID = #{invoiceInspection.id}
	</select>
	
	
</mapper>